{"ast":null,"code":"import _objectSpread from\"/Users/shaharnussbaum/Desktop/strikingdash/strikingdash/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/Users/shaharnussbaum/Desktop/strikingdash/strikingdash/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/shaharnussbaum/Desktop/strikingdash/strikingdash/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import\"antd/es/notification/style\";import _notification from\"antd/es/notification\";import actions from'./actions';var addNotificationSuccess=function addNotificationSuccess(){_notification.success({message:'Your Record hasbeen Submited'});};var addNotificationError=function addNotificationError(err){_notification.error({message:err});};var deleteNotificationSuccess=function deleteNotificationSuccess(){_notification.success({message:'Your Record hasbeen Deleted'});};var deleteNotificationError=function deleteNotificationError(err){_notification.error({message:err});};var updateNotificationSuccess=function updateNotificationSuccess(){_notification.success({message:'Your Record hasbeen updated'});};var updateNotificationError=function updateNotificationError(err){_notification.error({message:err});};var fbAddBegin=actions.fbAddBegin,fbAddSuccess=actions.fbAddSuccess,fbAddErr=actions.fbAddErr,fbReadBegin=actions.fbReadBegin,fbReadSuccess=actions.fbReadSuccess,fbReadErr=actions.fbReadErr,fbUpdateBegin=actions.fbUpdateBegin,fbUpdateSuccess=actions.fbUpdateSuccess,fbUpdateErr=actions.fbUpdateErr,fbDeleteBegin=actions.fbDeleteBegin,fbDeleteSuccess=actions.fbDeleteSuccess,fbDeleteErr=actions.fbDeleteErr,fbSingleDataBegin=actions.fbSingleDataBegin,fbSingleDataSuccess=actions.fbSingleDataSuccess,fbSingleDataErr=actions.fbSingleDataErr,fbUploadBegin=actions.fbUploadBegin,fbUploadSuccess=actions.fbUploadSuccess,fbUploadErr=actions.fbUploadErr,fbSearchBegin=actions.fbSearchBegin,fbSearchSuccess=actions.fbSearchSuccess,fbSearchErr=actions.fbSearchErr;var fbDataSubmit=function fbDataSubmit(data){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch,getState,_ref){var getFirebase,getFirestore,db;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:getFirebase=_ref.getFirebase,getFirestore=_ref.getFirestore;db=getFirestore();_context.prev=2;_context.next=5;return dispatch(fbAddBegin());case 5:_context.next=7;return db.collection('crud').doc(\"\".concat(data.id)).set(data);case 7:_context.next=9;return dispatch(fbAddSuccess(data));case 9:_context.next=11;return addNotificationSuccess();case 11:_context.next=19;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](2);_context.next=17;return dispatch(fbAddErr(_context.t0));case 17:_context.next=19;return addNotificationError(_context.t0);case 19:case\"end\":return _context.stop();}}},_callee,null,[[2,13]]);}));return function(_x,_x2,_x3){return _ref2.apply(this,arguments);};}();};var fbDataRead=function fbDataRead(){return/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch,getState,_ref3){var getFirebase,getFirestore,db,data,query;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:getFirebase=_ref3.getFirebase,getFirestore=_ref3.getFirestore;db=getFirestore();data=[];_context2.prev=3;_context2.next=6;return dispatch(fbReadBegin());case 6:_context2.next=8;return db.collection('crud').get();case 8:query=_context2.sent;_context2.next=11;return query.forEach(function(doc){data.push(doc.data());});case 11:_context2.next=13;return dispatch(fbReadSuccess(data));case 13:_context2.next=19;break;case 15:_context2.prev=15;_context2.t0=_context2[\"catch\"](3);_context2.next=19;return dispatch(fbReadErr(_context2.t0));case 19:case\"end\":return _context2.stop();}}},_callee2,null,[[3,15]]);}));return function(_x4,_x5,_x6){return _ref4.apply(this,arguments);};}();};var fbDataSearch=function fbDataSearch(value){return/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch,getState,_ref5){var getFirebase,getFirestore,db,data,query,searchValue;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:getFirebase=_ref5.getFirebase,getFirestore=_ref5.getFirestore;db=getFirestore();data=[];_context3.prev=3;_context3.next=6;return dispatch(fbSearchBegin());case 6:_context3.next=8;return db.collection('crud').get();case 8:query=_context3.sent;_context3.next=11;return query.forEach(function(doc){data.push(doc.data());});case 11:searchValue=data.filter(function(item){return item.name.toLowerCase().startsWith(value.toLowerCase());});_context3.next=14;return dispatch(fbSearchSuccess(searchValue));case 14:_context3.next=20;break;case 16:_context3.prev=16;_context3.t0=_context3[\"catch\"](3);_context3.next=20;return dispatch(fbSearchErr(_context3.t0));case 20:case\"end\":return _context3.stop();}}},_callee3,null,[[3,16]]);}));return function(_x7,_x8,_x9){return _ref6.apply(this,arguments);};}();};var fbDataUpdate=function fbDataUpdate(id,data){return/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(dispatch,getState,_ref7){var getFirebase,getFirestore,db,query;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:getFirebase=_ref7.getFirebase,getFirestore=_ref7.getFirestore;db=getFirestore();_context4.prev=2;_context4.next=5;return dispatch(fbUpdateBegin());case 5:_context4.next=7;return db.collection('crud').doc(\"\".concat(id)).update(_objectSpread({},data));case 7:_context4.next=9;return db.collection('crud').where('id','==',id).get();case 9:query=_context4.sent;_context4.next=12;return query.forEach(function(doc){dispatch(fbUpdateSuccess(doc.data()));});case 12:_context4.next=14;return updateNotificationSuccess();case 14:_context4.next=22;break;case 16:_context4.prev=16;_context4.t0=_context4[\"catch\"](2);_context4.next=20;return dispatch(fbUpdateErr(_context4.t0));case 20:_context4.next=22;return updateNotificationError(_context4.t0);case 22:case\"end\":return _context4.stop();}}},_callee4,null,[[2,16]]);}));return function(_x10,_x11,_x12){return _ref8.apply(this,arguments);};}();};var fbDataDelete=function fbDataDelete(id){return/*#__PURE__*/function(){var _ref10=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(dispatch,getState,_ref9){var getFirebase,getFirestore,db,data,query;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:getFirebase=_ref9.getFirebase,getFirestore=_ref9.getFirestore;db=getFirestore();data=[];_context5.prev=3;_context5.next=6;return dispatch(fbDeleteBegin());case 6:_context5.next=8;return db.collection('crud').doc(\"\".concat(id)).delete();case 8:_context5.next=10;return db.collection('crud').get();case 10:query=_context5.sent;_context5.next=13;return query.forEach(function(doc){data.push(doc.data());});case 13:_context5.next=15;return dispatch(fbDeleteSuccess(data));case 15:_context5.next=17;return deleteNotificationSuccess();case 17:_context5.next=19;return fbDataRead();case 19:_context5.next=27;break;case 21:_context5.prev=21;_context5.t0=_context5[\"catch\"](3);_context5.next=25;return dispatch(fbDeleteErr(_context5.t0));case 25:_context5.next=27;return deleteNotificationError(_context5.t0);case 27:case\"end\":return _context5.stop();}}},_callee5,null,[[3,21]]);}));return function(_x13,_x14,_x15){return _ref10.apply(this,arguments);};}();};var fbDataSingle=function fbDataSingle(id){return/*#__PURE__*/function(){var _ref12=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(dispatch,getState,_ref11){var getFirebase,getFirestore,db,query;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:getFirebase=_ref11.getFirebase,getFirestore=_ref11.getFirestore;db=getFirestore();_context6.prev=2;_context6.next=5;return dispatch(fbSingleDataBegin());case 5:_context6.next=7;return db.collection('crud').where('id','==',id).get();case 7:query=_context6.sent;_context6.next=10;return query.forEach(function(doc){dispatch(fbSingleDataSuccess(doc.data()));});case 10:_context6.next=16;break;case 12:_context6.prev=12;_context6.t0=_context6[\"catch\"](2);_context6.next=16;return dispatch(fbSingleDataErr(_context6.t0));case 16:case\"end\":return _context6.stop();}}},_callee6,null,[[2,12]]);}));return function(_x16,_x17,_x18){return _ref12.apply(this,arguments);};}();};var fbFileUploder=function fbFileUploder(imageAsFile){return/*#__PURE__*/function(){var _ref14=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(dispatch,getState,_ref13){var getFirebase,getFirestore,storage,uploadTask;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:getFirebase=_ref13.getFirebase,getFirestore=_ref13.getFirestore,storage=_ref13.storage;_context7.prev=1;_context7.next=4;return dispatch(fbUploadBegin());case 4:uploadTask=storage().ref(\"/images/\".concat(imageAsFile.name)).put(imageAsFile);_context7.next=7;return uploadTask.on('state_changed',function(snapShot){// takes a snap shot of the process as it is happening\nconsole.log(snapShot);},function(err){// catches the errors\nconsole.log(err);},function(){storage().ref('images').child(imageAsFile.name).getDownloadURL().then(function(fireBaseUrl){dispatch(fbUploadSuccess(fireBaseUrl));});});case 7:_context7.next=13;break;case 9:_context7.prev=9;_context7.t0=_context7[\"catch\"](1);_context7.next=13;return dispatch(fbUploadErr(_context7.t0));case 13:case\"end\":return _context7.stop();}}},_callee7,null,[[1,9]]);}));return function(_x19,_x20,_x21){return _ref14.apply(this,arguments);};}();};var fbFileClear=function fbFileClear(){return/*#__PURE__*/function(){var _ref15=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(dispatch){return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:_context8.prev=0;_context8.next=3;return dispatch(fbUploadBegin());case 3:dispatch(fbUploadSuccess(null));_context8.next=10;break;case 6:_context8.prev=6;_context8.t0=_context8[\"catch\"](0);_context8.next=10;return dispatch(fbUploadErr(_context8.t0));case 10:case\"end\":return _context8.stop();}}},_callee8,null,[[0,6]]);}));return function(_x22){return _ref15.apply(this,arguments);};}();};export{fbDataSubmit,fbDataSearch,fbDataDelete,fbDataSingle,fbDataUpdate,fbDataRead,fbFileUploder,fbFileClear};","map":{"version":3,"sources":["/Users/shaharnussbaum/Desktop/strikingdash/strikingdash/src/redux/firestore/actionCreator.js"],"names":["actions","addNotificationSuccess","success","message","addNotificationError","err","error","deleteNotificationSuccess","deleteNotificationError","updateNotificationSuccess","updateNotificationError","fbAddBegin","fbAddSuccess","fbAddErr","fbReadBegin","fbReadSuccess","fbReadErr","fbUpdateBegin","fbUpdateSuccess","fbUpdateErr","fbDeleteBegin","fbDeleteSuccess","fbDeleteErr","fbSingleDataBegin","fbSingleDataSuccess","fbSingleDataErr","fbUploadBegin","fbUploadSuccess","fbUploadErr","fbSearchBegin","fbSearchSuccess","fbSearchErr","fbDataSubmit","data","dispatch","getState","getFirebase","getFirestore","db","collection","doc","id","set","fbDataRead","get","query","forEach","push","fbDataSearch","value","searchValue","filter","item","name","toLowerCase","startsWith","fbDataUpdate","update","where","fbDataDelete","delete","fbDataSingle","fbFileUploder","imageAsFile","storage","uploadTask","ref","put","on","snapShot","console","log","child","getDownloadURL","then","fireBaseUrl","fbFileClear"],"mappings":"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","sourcesContent":["import { notification } from 'antd';\r\nimport actions from './actions';\r\n\r\nconst addNotificationSuccess = () => {\r\n  notification.success({\r\n    message: 'Your Record hasbeen Submited',\r\n  });\r\n};\r\n\r\nconst addNotificationError = err => {\r\n  notification.error({\r\n    message: err,\r\n  });\r\n};\r\n\r\nconst deleteNotificationSuccess = () => {\r\n  notification.success({\r\n    message: 'Your Record hasbeen Deleted',\r\n  });\r\n};\r\n\r\nconst deleteNotificationError = err => {\r\n  notification.error({\r\n    message: err,\r\n  });\r\n};\r\n\r\nconst updateNotificationSuccess = () => {\r\n  notification.success({\r\n    message: 'Your Record hasbeen updated',\r\n  });\r\n};\r\n\r\nconst updateNotificationError = err => {\r\n  notification.error({\r\n    message: err,\r\n  });\r\n};\r\n\r\nconst {\r\n  fbAddBegin,\r\n  fbAddSuccess,\r\n  fbAddErr,\r\n\r\n  fbReadBegin,\r\n  fbReadSuccess,\r\n  fbReadErr,\r\n\r\n  fbUpdateBegin,\r\n  fbUpdateSuccess,\r\n  fbUpdateErr,\r\n\r\n  fbDeleteBegin,\r\n  fbDeleteSuccess,\r\n  fbDeleteErr,\r\n\r\n  fbSingleDataBegin,\r\n  fbSingleDataSuccess,\r\n  fbSingleDataErr,\r\n\r\n  fbUploadBegin,\r\n  fbUploadSuccess,\r\n  fbUploadErr,\r\n\r\n  fbSearchBegin,\r\n  fbSearchSuccess,\r\n  fbSearchErr,\r\n} = actions;\r\n\r\nconst fbDataSubmit = data => {\r\n  return async (dispatch, getState, { getFirebase, getFirestore }) => {\r\n    const db = getFirestore();\r\n    try {\r\n      await dispatch(fbAddBegin());\r\n      await db\r\n        .collection('crud')\r\n        .doc(`${data.id}`)\r\n        .set(data);\r\n      await dispatch(fbAddSuccess(data));\r\n      await addNotificationSuccess();\r\n    } catch (err) {\r\n      await dispatch(fbAddErr(err));\r\n      await addNotificationError(err);\r\n    }\r\n  };\r\n};\r\n\r\nconst fbDataRead = () => {\r\n  return async (dispatch, getState, { getFirebase, getFirestore }) => {\r\n    const db = getFirestore();\r\n    const data = [];\r\n    try {\r\n      await dispatch(fbReadBegin());\r\n      const query = await db.collection('crud').get();\r\n      await query.forEach(doc => {\r\n        data.push(doc.data());\r\n      });\r\n      await dispatch(fbReadSuccess(data));\r\n    } catch (err) {\r\n      await dispatch(fbReadErr(err));\r\n    }\r\n  };\r\n};\r\n\r\nconst fbDataSearch = value => {\r\n  return async (dispatch, getState, { getFirebase, getFirestore }) => {\r\n    const db = getFirestore();\r\n    const data = [];\r\n    try {\r\n      await dispatch(fbSearchBegin());\r\n      const query = await db.collection('crud').get();\r\n      await query.forEach(doc => {\r\n        data.push(doc.data());\r\n      });\r\n      const searchValue = data.filter(item => item.name.toLowerCase().startsWith(value.toLowerCase()));\r\n      await dispatch(fbSearchSuccess(searchValue));\r\n    } catch (err) {\r\n      await dispatch(fbSearchErr(err));\r\n    }\r\n  };\r\n};\r\n\r\nconst fbDataUpdate = (id, data) => {\r\n  return async (dispatch, getState, { getFirebase, getFirestore }) => {\r\n    const db = getFirestore();\r\n    try {\r\n      await dispatch(fbUpdateBegin());\r\n      await db\r\n        .collection('crud')\r\n        .doc(`${id}`)\r\n        .update({\r\n          ...data,\r\n        });\r\n\r\n      const query = await db\r\n        .collection('crud')\r\n        .where('id', '==', id)\r\n        .get();\r\n      await query.forEach(doc => {\r\n        dispatch(fbUpdateSuccess(doc.data()));\r\n      });\r\n\r\n      await updateNotificationSuccess();\r\n    } catch (err) {\r\n      await dispatch(fbUpdateErr(err));\r\n      await updateNotificationError(err);\r\n    }\r\n  };\r\n};\r\n\r\nconst fbDataDelete = id => {\r\n  return async (dispatch, getState, { getFirebase, getFirestore }) => {\r\n    const db = getFirestore();\r\n    const data = [];\r\n    try {\r\n      await dispatch(fbDeleteBegin());\r\n      await db\r\n        .collection('crud')\r\n        .doc(`${id}`)\r\n        .delete();\r\n      const query = await db.collection('crud').get();\r\n      await query.forEach(doc => {\r\n        data.push(doc.data());\r\n      });\r\n      await dispatch(fbDeleteSuccess(data));\r\n      await deleteNotificationSuccess();\r\n      await fbDataRead();\r\n    } catch (err) {\r\n      await dispatch(fbDeleteErr(err));\r\n      await deleteNotificationError(err);\r\n    }\r\n  };\r\n};\r\n\r\nconst fbDataSingle = id => {\r\n  return async (dispatch, getState, { getFirebase, getFirestore }) => {\r\n    const db = getFirestore();\r\n    try {\r\n      await dispatch(fbSingleDataBegin());\r\n      const query = await db\r\n        .collection('crud')\r\n        .where('id', '==', id)\r\n        .get();\r\n      await query.forEach(doc => {\r\n        dispatch(fbSingleDataSuccess(doc.data()));\r\n      });\r\n    } catch (err) {\r\n      await dispatch(fbSingleDataErr(err));\r\n    }\r\n  };\r\n};\r\n\r\nconst fbFileUploder = imageAsFile => {\r\n  return async (dispatch, getState, { getFirebase, getFirestore, storage }) => {\r\n    try {\r\n      await dispatch(fbUploadBegin());\r\n      const uploadTask = storage()\r\n        .ref(`/images/${imageAsFile.name}`)\r\n        .put(imageAsFile);\r\n\r\n      await uploadTask.on(\r\n        'state_changed',\r\n        snapShot => {\r\n          // takes a snap shot of the process as it is happening\r\n          console.log(snapShot);\r\n        },\r\n        err => {\r\n          // catches the errors\r\n          console.log(err);\r\n        },\r\n        () => {\r\n          storage()\r\n            .ref('images')\r\n            .child(imageAsFile.name)\r\n            .getDownloadURL()\r\n            .then(fireBaseUrl => {\r\n              dispatch(fbUploadSuccess(fireBaseUrl));\r\n            });\r\n        },\r\n      );\r\n    } catch (err) {\r\n      await dispatch(fbUploadErr(err));\r\n    }\r\n  };\r\n};\r\n\r\nconst fbFileClear = () => {\r\n  return async dispatch => {\r\n    try {\r\n      await dispatch(fbUploadBegin());\r\n      dispatch(fbUploadSuccess(null));\r\n    } catch (err) {\r\n      await dispatch(fbUploadErr(err));\r\n    }\r\n  };\r\n};\r\n\r\nexport { fbDataSubmit, fbDataSearch, fbDataDelete, fbDataSingle, fbDataUpdate, fbDataRead, fbFileUploder, fbFileClear };\r\n"]},"metadata":{},"sourceType":"module"}