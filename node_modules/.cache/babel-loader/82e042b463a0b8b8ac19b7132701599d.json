{"ast":null,"code":"import _objectSpread from\"/Users/shaharnussbaum/Desktop/strikingdash/strikingdash/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/shaharnussbaum/Desktop/strikingdash/strikingdash/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import FeatherIcon from'feather-icons-react';import moment from'moment';import{Link}from'react-router-dom/cjs/react-router-dom.min';import{useDispatch,useSelector}from'react-redux';import FontAwesome from'react-fontawesome';import{Style,EmailAuthor,EmailHeader}from'./style';import Topbar from'./Topbar';import{AutoComplete}from'../../../components/autoComplete/autoComplete';import Heading from'../../../components/heading/heading';import{textRefactor}from'../../../components/utilities/utilities';import{Dropdown}from'../../../components/dropdown/dropdown';import{onStarUpdate,onSortingAscending,onSortingDescending}from'../../../redux/email/actionCreator';var Content=function Content(_ref){var searchData=_ref.searchData,email=_ref.email;var dispatch=useDispatch();var _useSelector=useSelector(function(state){return{rtl:state.ChangeLayoutMode.rtlData};}),rtl=_useSelector.rtl;var _useState=useState({selectedRowKeys:[],notData:searchData,emails:email,sort:true}),_useState2=_slicedToArray(_useState,2),state=_useState2[0],setState=_useState2[1];var selectedRowKeys=state.selectedRowKeys,notData=state.notData,emails=state.emails,sort=state.sort;useEffect(function(){setState({emails:email,selectedRowKeys:selectedRowKeys,sort:sort});},[email,selectedRowKeys,sort]);var handleSearch=function handleSearch(searchText){var data=searchData!==undefined&&searchData.filter(function(item){return item.title.toUpperCase().startsWith(searchText.toUpperCase());});setState(_objectSpread(_objectSpread({},state),{},{notData:data}));};var refreshState=function refreshState(e){e.preventDefault();setState(_objectSpread(_objectSpread({},state),{},{emails:email}));};var onStaredChange=function onStaredChange(id){dispatch(onStarUpdate(id));};var data=[];if(emails!==undefined)emails.map(function(inbox,key){// eslint-disable-next-line no-shadow\nvar id=inbox.id,type=inbox.type,email=inbox.email,userName=inbox.userName,status=inbox.status,img=inbox.img,subject=inbox.subject,body=inbox.body,attach=inbox.attach,stared=inbox.stared;var same=moment(id).format('MM-DD-YYYY')===moment().format('MM-DD-YYYY');return data.push({key:id,name:/*#__PURE__*/React.createElement(EmailAuthor,null,/*#__PURE__*/React.createElement(Link,{onClick:function onClick(){onStaredChange(id);},to:\"#\",className:stared?'starActive':'starDeactivate'},/*#__PURE__*/React.createElement(FontAwesome,{name:\"star-o\"})),/*#__PURE__*/React.createElement(\"img\",{src:img,alt:\"\"}),/*#__PURE__*/React.createElement(Heading,{as:\"h5\"},/*#__PURE__*/React.createElement(Link,null,userName))),email:email,status:status,content:/*#__PURE__*/React.createElement(EmailHeader,null,/*#__PURE__*/React.createElement(Heading,{as:\"h5\"},/*#__PURE__*/React.createElement(Link,{to:\"/admin/email/single/\".concat(id)},subject),/*#__PURE__*/React.createElement(\"span\",{className:\"mail-badge \".concat(key<=1?'primary':'')},type)),/*#__PURE__*/React.createElement(\"p\",null,textRefactor(body,10)),attach.length?attach.map(function(item){return/*#__PURE__*/React.createElement(\"a\",{key:item,className:\"btn-attachment\",download:true,href:require(\"../../../static/img/email/\".concat(item))},/*#__PURE__*/React.createElement(FeatherIcon,{icon:\"paperclip\",size:14}),item);}):null),time:/*#__PURE__*/React.createElement(\"span\",{className:\"email-time\"},same?moment(id).format('hh:mm A'):moment(id).format('LL'))});});var handleChange=function handleChange(pagination,filters,sorter){setState(_objectSpread(_objectSpread({},state),{},{sortedInfo:sorter}));};var onRowSelection=function onRowSelection(filterObj){var filter=filterObj.filter,byValue=filterObj.byValue;var newSelectedRowKeys=emails.filter(function(value){return value[filter]===byValue;}).map(function(item){return item.id;});setState(_objectSpread(_objectSpread({},state),{},{selectedRowKeys:newSelectedRowKeys}));};var onSelectChange=function onSelectChange(selectedRowKey){setState(_objectSpread(_objectSpread({},state),{},{selectedRowKeys:selectedRowKey}));};var rowSelection={selectedRowKeys:selectedRowKeys,onChange:onSelectChange,hideDefaultSelections:true,selections:[{key:'all',text:'All',onSelect:function onSelect(){var newSelectedRowKeys=email.map(function(item){return item.id;});setState(_objectSpread(_objectSpread({},state),{},{selectedRowKeys:newSelectedRowKeys}));}},{key:'read',text:'Read',onSelect:onRowSelection.bind(null,{filter:'status',byValue:'read'})},{key:'unread',text:'Unread',onSelect:onRowSelection.bind(null,{filter:'status',byValue:'unread'})},{key:'stared',text:'Stared',onSelect:onRowSelection.bind(null,{filter:'stared',byValue:true})},{key:'unstared',text:'Unstared',onSelect:onRowSelection.bind(null,{filter:'status',byValue:false})}]};var columns=[{title:/*#__PURE__*/React.createElement(Topbar,{refreshState:refreshState}),dataIndex:'name'},{title:/*#__PURE__*/React.createElement(\"div\",{className:\"email-top-search\"},/*#__PURE__*/React.createElement(AutoComplete,{placeholder:\"Search mail\",onSearch:handleSearch,dataSource:notData,width:\"80%\",patterns:true})),dataIndex:'content'},{title:/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"email-top-right d-flex align-items-center\"},/*#__PURE__*/React.createElement(\"span\",{className:\"page-number\"},\"1 - 50 of 235\"),/*#__PURE__*/React.createElement(\"div\",{className:\"pagination-slider\"},/*#__PURE__*/React.createElement(Link,{className:\"btn-paging\",to:\"#\"},/*#__PURE__*/React.createElement(FeatherIcon,{icon:!rtl?'chevron-left':'chevron-right',size:14})),/*#__PURE__*/React.createElement(Link,{className:\"btn-paging\",to:\"#\"},/*#__PURE__*/React.createElement(FeatherIcon,{icon:rtl?'chevron-left':'chevron-right',size:14}))),/*#__PURE__*/React.createElement(\"div\",{className:\"email-extra\"},/*#__PURE__*/React.createElement(Link,{onClick:function onClick(){setState(_objectSpread(_objectSpread({},state),{},{sort:!sort}));if(sort){dispatch(onSortingAscending());}else{dispatch(onSortingDescending());}},to:\"#\"},/*#__PURE__*/React.createElement(FeatherIcon,{icon:\"sliders\",size:16})),/*#__PURE__*/React.createElement(Dropdown,{content:/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Link,{to:\"#\"},/*#__PURE__*/React.createElement(\"span\",null,\"Newest\")),/*#__PURE__*/React.createElement(Link,{to:\"#\"},/*#__PURE__*/React.createElement(\"span\",null,\"Oldest\")),/*#__PURE__*/React.createElement(Link,{to:\"#\"},/*#__PURE__*/React.createElement(\"span\",null,\"Unread\")))},/*#__PURE__*/React.createElement(Link,{to:\"#\"},/*#__PURE__*/React.createElement(FeatherIcon,{icon:\"more-vertical\",size:18})))))),dataIndex:'time',key:'time'}];return/*#__PURE__*/React.createElement(Style,{className:\"table-responsive\",pagination:false,rowSelection:rowSelection,columns:columns,dataSource:data,onChange:handleChange});};export default Content;","map":{"version":3,"sources":["/Users/shaharnussbaum/Desktop/strikingdash/strikingdash/src/container/email/overview/Content.js"],"names":["React","useState","useEffect","FeatherIcon","moment","Link","useDispatch","useSelector","FontAwesome","Style","EmailAuthor","EmailHeader","Topbar","AutoComplete","Heading","textRefactor","Dropdown","onStarUpdate","onSortingAscending","onSortingDescending","Content","searchData","email","dispatch","state","rtl","ChangeLayoutMode","rtlData","selectedRowKeys","notData","emails","sort","setState","handleSearch","searchText","data","undefined","filter","item","title","toUpperCase","startsWith","refreshState","e","preventDefault","onStaredChange","id","map","inbox","key","type","userName","status","img","subject","body","attach","stared","same","format","push","name","content","length","require","time","handleChange","pagination","filters","sorter","sortedInfo","onRowSelection","filterObj","byValue","newSelectedRowKeys","value","onSelectChange","selectedRowKey","rowSelection","onChange","hideDefaultSelections","selections","text","onSelect","bind","columns","dataIndex"],"mappings":"2VAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,MAAOC,CAAAA,WAAP,KAAwB,qBAAxB,CACA,MAAOC,CAAAA,MAAP,KAAmB,QAAnB,CACA,OAASC,IAAT,KAAqB,2CAArB,CAEA,OAASC,WAAT,CAAsBC,WAAtB,KAAyC,aAAzC,CACA,MAAOC,CAAAA,WAAP,KAAwB,mBAAxB,CACA,OAASC,KAAT,CAAgBC,WAAhB,CAA6BC,WAA7B,KAAgD,SAAhD,CACA,MAAOC,CAAAA,MAAP,KAAmB,UAAnB,CACA,OAASC,YAAT,KAA6B,+CAA7B,CACA,MAAOC,CAAAA,OAAP,KAAoB,qCAApB,CACA,OAASC,YAAT,KAA6B,yCAA7B,CACA,OAASC,QAAT,KAAyB,uCAAzB,CACA,OAASC,YAAT,CAAuBC,kBAAvB,CAA2CC,mBAA3C,KAAsE,oCAAtE,CAEA,GAAMC,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,MAA2B,IAAxBC,CAAAA,UAAwB,MAAxBA,UAAwB,CAAZC,KAAY,MAAZA,KAAY,CACzC,GAAMC,CAAAA,QAAQ,CAAGjB,WAAW,EAA5B,CADyC,iBAEzBC,WAAW,CAAC,SAAAiB,KAAK,CAAI,CACnC,MAAO,CACLC,GAAG,CAAED,KAAK,CAACE,gBAAN,CAAuBC,OADvB,CAAP,CAGD,CAJ0B,CAFc,CAEjCF,GAFiC,cAEjCA,GAFiC,eAOfxB,QAAQ,CAAC,CACjC2B,eAAe,CAAE,EADgB,CAEjCC,OAAO,CAAER,UAFwB,CAGjCS,MAAM,CAAER,KAHyB,CAIjCS,IAAI,CAAE,IAJ2B,CAAD,CAPO,wCAOlCP,KAPkC,eAO3BQ,QAP2B,kBAajCJ,CAAAA,eAbiC,CAaUJ,KAbV,CAajCI,eAbiC,CAahBC,OAbgB,CAaUL,KAbV,CAahBK,OAbgB,CAaPC,MAbO,CAaUN,KAbV,CAaPM,MAbO,CAaCC,IAbD,CAaUP,KAbV,CAaCO,IAbD,CAezC7B,SAAS,CAAC,UAAM,CACd8B,QAAQ,CAAC,CACPF,MAAM,CAAER,KADD,CAEPM,eAAe,CAAfA,eAFO,CAGPG,IAAI,CAAJA,IAHO,CAAD,CAAR,CAKD,CANQ,CAMN,CAACT,KAAD,CAAQM,eAAR,CAAyBG,IAAzB,CANM,CAAT,CAQA,GAAME,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAAAC,UAAU,CAAI,CACjC,GAAMC,CAAAA,IAAI,CACRd,UAAU,GAAKe,SAAf,EACAf,UAAU,CAACgB,MAAX,CAAkB,SAAAC,IAAI,QAAIA,CAAAA,IAAI,CAACC,KAAL,CAAWC,WAAX,GAAyBC,UAAzB,CAAoCP,UAAU,CAACM,WAAX,EAApC,CAAJ,EAAtB,CAFF,CAGAR,QAAQ,gCACHR,KADG,MAENK,OAAO,CAAEM,IAFH,GAAR,CAID,CARD,CAUA,GAAMO,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAAAC,CAAC,CAAI,CACxBA,CAAC,CAACC,cAAF,GACAZ,QAAQ,gCACHR,KADG,MAENM,MAAM,CAAER,KAFF,GAAR,CAID,CAND,CAQA,GAAMuB,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,CAAAC,EAAE,CAAI,CAC3BvB,QAAQ,CAACN,YAAY,CAAC6B,EAAD,CAAb,CAAR,CACD,CAFD,CAIA,GAAMX,CAAAA,IAAI,CAAG,EAAb,CACA,GAAIL,MAAM,GAAKM,SAAf,CACEN,MAAM,CAACiB,GAAP,CAAW,SAACC,KAAD,CAAQC,GAAR,CAAgB,CACzB;AADyB,GAEjBH,CAAAA,EAFiB,CAEyDE,KAFzD,CAEjBF,EAFiB,CAEbI,IAFa,CAEyDF,KAFzD,CAEbE,IAFa,CAEP5B,KAFO,CAEyD0B,KAFzD,CAEP1B,KAFO,CAEA6B,QAFA,CAEyDH,KAFzD,CAEAG,QAFA,CAEUC,MAFV,CAEyDJ,KAFzD,CAEUI,MAFV,CAEkBC,GAFlB,CAEyDL,KAFzD,CAEkBK,GAFlB,CAEuBC,OAFvB,CAEyDN,KAFzD,CAEuBM,OAFvB,CAEgCC,IAFhC,CAEyDP,KAFzD,CAEgCO,IAFhC,CAEsCC,MAFtC,CAEyDR,KAFzD,CAEsCQ,MAFtC,CAE8CC,MAF9C,CAEyDT,KAFzD,CAE8CS,MAF9C,CAIzB,GAAMC,CAAAA,IAAI,CAAGtD,MAAM,CAAC0C,EAAD,CAAN,CAAWa,MAAX,CAAkB,YAAlB,IAAoCvD,MAAM,GAAGuD,MAAT,CAAgB,YAAhB,CAAjD,CACA,MAAOxB,CAAAA,IAAI,CAACyB,IAAL,CAAU,CACfX,GAAG,CAAEH,EADU,CAEfe,IAAI,cACF,oBAAC,WAAD,mBACE,oBAAC,IAAD,EACE,OAAO,CAAE,kBAAM,CACbhB,cAAc,CAACC,EAAD,CAAd,CACD,CAHH,CAIE,EAAE,CAAC,GAJL,CAKE,SAAS,CAAEW,MAAM,CAAG,YAAH,CAAkB,gBALrC,eAOE,oBAAC,WAAD,EAAa,IAAI,CAAC,QAAlB,EAPF,CADF,cAUE,2BAAK,GAAG,CAAEJ,GAAV,CAAe,GAAG,CAAC,EAAnB,EAVF,cAWE,oBAAC,OAAD,EAAS,EAAE,CAAC,IAAZ,eACE,oBAAC,IAAD,MAAOF,QAAP,CADF,CAXF,CAHa,CAmBf7B,KAAK,CAALA,KAnBe,CAoBf8B,MAAM,CAANA,MApBe,CAqBfU,OAAO,cACL,oBAAC,WAAD,mBACE,oBAAC,OAAD,EAAS,EAAE,CAAC,IAAZ,eACE,oBAAC,IAAD,EAAM,EAAE,+BAAyBhB,EAAzB,CAAR,EAAwCQ,OAAxC,CADF,cAEE,4BAAM,SAAS,sBAAgBL,GAAG,EAAI,CAAP,CAAW,SAAX,CAAuB,EAAvC,CAAf,EAA6DC,IAA7D,CAFF,CADF,cAKE,6BAAInC,YAAY,CAACwC,IAAD,CAAO,EAAP,CAAhB,CALF,CAMGC,MAAM,CAACO,MAAP,CACGP,MAAM,CAACT,GAAP,CAAW,SAAAT,IAAI,qBACb,yBAAG,GAAG,CAAEA,IAAR,CAAc,SAAS,CAAC,gBAAxB,CAAyC,QAAQ,KAAjD,CAAkD,IAAI,CAAE0B,OAAO,qCAA8B1B,IAA9B,EAA/D,eACE,oBAAC,WAAD,EAAa,IAAI,CAAC,WAAlB,CAA8B,IAAI,CAAE,EAApC,EADF,CAEGA,IAFH,CADa,EAAf,CADH,CAOG,IAbN,CAtBa,CAsCf2B,IAAI,cAAE,4BAAM,SAAS,CAAC,YAAhB,EAA8BP,IAAI,CAAGtD,MAAM,CAAC0C,EAAD,CAAN,CAAWa,MAAX,CAAkB,SAAlB,CAAH,CAAkCvD,MAAM,CAAC0C,EAAD,CAAN,CAAWa,MAAX,CAAkB,IAAlB,CAApE,CAtCS,CAAV,CAAP,CAwCD,CA7CD,EA+CF,GAAMO,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACC,UAAD,CAAaC,OAAb,CAAsBC,MAAtB,CAAiC,CACpDrC,QAAQ,gCACHR,KADG,MAEN8C,UAAU,CAAED,MAFN,GAAR,CAID,CALD,CAOA,GAAME,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,CAAAC,SAAS,CAAI,IAC1BnC,CAAAA,MAD0B,CACNmC,SADM,CAC1BnC,MAD0B,CAClBoC,OADkB,CACND,SADM,CAClBC,OADkB,CAGlC,GAAMC,CAAAA,kBAAkB,CAAG5C,MAAM,CAC9BO,MADwB,CACjB,SAAAsC,KAAK,CAAI,CACf,MAAOA,CAAAA,KAAK,CAACtC,MAAD,CAAL,GAAkBoC,OAAzB,CACD,CAHwB,EAIxB1B,GAJwB,CAIpB,SAAAT,IAAI,QAAIA,CAAAA,IAAI,CAACQ,EAAT,EAJgB,CAA3B,CAMAd,QAAQ,gCAAMR,KAAN,MAAaI,eAAe,CAAE8C,kBAA9B,GAAR,CACD,CAVD,CAYA,GAAME,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,CAAAC,cAAc,CAAI,CACvC7C,QAAQ,gCAAMR,KAAN,MAAaI,eAAe,CAAEiD,cAA9B,GAAR,CACD,CAFD,CAIA,GAAMC,CAAAA,YAAY,CAAG,CACnBlD,eAAe,CAAfA,eADmB,CAEnBmD,QAAQ,CAAEH,cAFS,CAGnBI,qBAAqB,CAAE,IAHJ,CAInBC,UAAU,CAAE,CACV,CACEhC,GAAG,CAAE,KADP,CAEEiC,IAAI,CAAE,KAFR,CAGEC,QAAQ,CAAE,mBAAM,CACd,GAAMT,CAAAA,kBAAkB,CAAGpD,KAAK,CAACyB,GAAN,CAAU,SAAAT,IAAI,QAAIA,CAAAA,IAAI,CAACQ,EAAT,EAAd,CAA3B,CACAd,QAAQ,gCAAMR,KAAN,MAAaI,eAAe,CAAE8C,kBAA9B,GAAR,CACD,CANH,CADU,CASV,CACEzB,GAAG,CAAE,MADP,CAEEiC,IAAI,CAAE,MAFR,CAGEC,QAAQ,CAAEZ,cAAc,CAACa,IAAf,CAAoB,IAApB,CAA0B,CAAE/C,MAAM,CAAE,QAAV,CAAoBoC,OAAO,CAAE,MAA7B,CAA1B,CAHZ,CATU,CAcV,CACExB,GAAG,CAAE,QADP,CAEEiC,IAAI,CAAE,QAFR,CAGEC,QAAQ,CAAEZ,cAAc,CAACa,IAAf,CAAoB,IAApB,CAA0B,CAAE/C,MAAM,CAAE,QAAV,CAAoBoC,OAAO,CAAE,QAA7B,CAA1B,CAHZ,CAdU,CAmBV,CACExB,GAAG,CAAE,QADP,CAEEiC,IAAI,CAAE,QAFR,CAGEC,QAAQ,CAAEZ,cAAc,CAACa,IAAf,CAAoB,IAApB,CAA0B,CAAE/C,MAAM,CAAE,QAAV,CAAoBoC,OAAO,CAAE,IAA7B,CAA1B,CAHZ,CAnBU,CAwBV,CACExB,GAAG,CAAE,UADP,CAEEiC,IAAI,CAAE,UAFR,CAGEC,QAAQ,CAAEZ,cAAc,CAACa,IAAf,CAAoB,IAApB,CAA0B,CAAE/C,MAAM,CAAE,QAAV,CAAoBoC,OAAO,CAAE,KAA7B,CAA1B,CAHZ,CAxBU,CAJO,CAArB,CAoCA,GAAMY,CAAAA,OAAO,CAAG,CACd,CACE9C,KAAK,cAAE,oBAAC,MAAD,EAAQ,YAAY,CAAEG,YAAtB,EADT,CAEE4C,SAAS,CAAE,MAFb,CADc,CAKd,CACE/C,KAAK,cACH,2BAAK,SAAS,CAAC,kBAAf,eACE,oBAAC,YAAD,EAAc,WAAW,CAAC,aAA1B,CAAwC,QAAQ,CAAEN,YAAlD,CAAgE,UAAU,CAAEJ,OAA5E,CAAqF,KAAK,CAAC,KAA3F,CAAiG,QAAQ,KAAzG,EADF,CAFJ,CAMEyD,SAAS,CAAE,SANb,CALc,CAad,CACE/C,KAAK,cACH,qDACE,2BAAK,SAAS,CAAC,2CAAf,eACE,4BAAM,SAAS,CAAC,aAAhB,kBADF,cAEE,2BAAK,SAAS,CAAC,mBAAf,eACE,oBAAC,IAAD,EAAM,SAAS,CAAC,YAAhB,CAA6B,EAAE,CAAC,GAAhC,eACE,oBAAC,WAAD,EAAa,IAAI,CAAE,CAACd,GAAD,CAAO,cAAP,CAAwB,eAA3C,CAA4D,IAAI,CAAE,EAAlE,EADF,CADF,cAIE,oBAAC,IAAD,EAAM,SAAS,CAAC,YAAhB,CAA6B,EAAE,CAAC,GAAhC,eACE,oBAAC,WAAD,EAAa,IAAI,CAAEA,GAAG,CAAG,cAAH,CAAoB,eAA1C,CAA2D,IAAI,CAAE,EAAjE,EADF,CAJF,CAFF,cAUE,2BAAK,SAAS,CAAC,aAAf,eACE,oBAAC,IAAD,EACE,OAAO,CAAE,kBAAM,CACbO,QAAQ,gCACHR,KADG,MAENO,IAAI,CAAE,CAACA,IAFD,GAAR,CAIA,GAAIA,IAAJ,CAAU,CACRR,QAAQ,CAACL,kBAAkB,EAAnB,CAAR,CACD,CAFD,IAEO,CACLK,QAAQ,CAACJ,mBAAmB,EAApB,CAAR,CACD,CACF,CAXH,CAYE,EAAE,CAAC,GAZL,eAcE,oBAAC,WAAD,EAAa,IAAI,CAAC,SAAlB,CAA4B,IAAI,CAAE,EAAlC,EAdF,CADF,cAiBE,oBAAC,QAAD,EACE,OAAO,cACL,qDACE,oBAAC,IAAD,EAAM,EAAE,CAAC,GAAT,eACE,yCADF,CADF,cAIE,oBAAC,IAAD,EAAM,EAAE,CAAC,GAAT,eACE,yCADF,CAJF,cAOE,oBAAC,IAAD,EAAM,EAAE,CAAC,GAAT,eACE,yCADF,CAPF,CAFJ,eAeE,oBAAC,IAAD,EAAM,EAAE,CAAC,GAAT,eACE,oBAAC,WAAD,EAAa,IAAI,CAAC,eAAlB,CAAkC,IAAI,CAAE,EAAxC,EADF,CAfF,CAjBF,CAVF,CADF,CAFJ,CAqDEmE,SAAS,CAAE,MArDb,CAsDErC,GAAG,CAAE,MAtDP,CAbc,CAAhB,CAuEA,mBACE,oBAAC,KAAD,EACE,SAAS,CAAC,kBADZ,CAEE,UAAU,CAAE,KAFd,CAGE,YAAY,CAAE6B,YAHhB,CAIE,OAAO,CAAEO,OAJX,CAKE,UAAU,CAAElD,IALd,CAME,QAAQ,CAAE+B,YANZ,EADF,CAUD,CA1OD,CAiPA,cAAe9C,CAAAA,OAAf","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport FeatherIcon from 'feather-icons-react';\r\nimport moment from 'moment';\r\nimport { Link } from 'react-router-dom/cjs/react-router-dom.min';\r\nimport propTypes from 'prop-types';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport FontAwesome from 'react-fontawesome';\r\nimport { Style, EmailAuthor, EmailHeader } from './style';\r\nimport Topbar from './Topbar';\r\nimport { AutoComplete } from '../../../components/autoComplete/autoComplete';\r\nimport Heading from '../../../components/heading/heading';\r\nimport { textRefactor } from '../../../components/utilities/utilities';\r\nimport { Dropdown } from '../../../components/dropdown/dropdown';\r\nimport { onStarUpdate, onSortingAscending, onSortingDescending } from '../../../redux/email/actionCreator';\r\n\r\nconst Content = ({ searchData, email }) => {\r\n  const dispatch = useDispatch();\r\n  const { rtl } = useSelector(state => {\r\n    return {\r\n      rtl: state.ChangeLayoutMode.rtlData,\r\n    };\r\n  });\r\n  const [state, setState] = useState({\r\n    selectedRowKeys: [],\r\n    notData: searchData,\r\n    emails: email,\r\n    sort: true,\r\n  });\r\n  const { selectedRowKeys, notData, emails, sort } = state;\r\n\r\n  useEffect(() => {\r\n    setState({\r\n      emails: email,\r\n      selectedRowKeys,\r\n      sort,\r\n    });\r\n  }, [email, selectedRowKeys, sort]);\r\n\r\n  const handleSearch = searchText => {\r\n    const data =\r\n      searchData !== undefined &&\r\n      searchData.filter(item => item.title.toUpperCase().startsWith(searchText.toUpperCase()));\r\n    setState({\r\n      ...state,\r\n      notData: data,\r\n    });\r\n  };\r\n\r\n  const refreshState = e => {\r\n    e.preventDefault();\r\n    setState({\r\n      ...state,\r\n      emails: email,\r\n    });\r\n  };\r\n\r\n  const onStaredChange = id => {\r\n    dispatch(onStarUpdate(id));\r\n  };\r\n\r\n  const data = [];\r\n  if (emails !== undefined)\r\n    emails.map((inbox, key) => {\r\n      // eslint-disable-next-line no-shadow\r\n      const { id, type, email, userName, status, img, subject, body, attach, stared } = inbox;\r\n\r\n      const same = moment(id).format('MM-DD-YYYY') === moment().format('MM-DD-YYYY');\r\n      return data.push({\r\n        key: id,\r\n        name: (\r\n          <EmailAuthor>\r\n            <Link\r\n              onClick={() => {\r\n                onStaredChange(id);\r\n              }}\r\n              to=\"#\"\r\n              className={stared ? 'starActive' : 'starDeactivate'}\r\n            >\r\n              <FontAwesome name=\"star-o\" />\r\n            </Link>\r\n            <img src={img} alt=\"\" />\r\n            <Heading as=\"h5\">\r\n              <Link>{userName}</Link>\r\n            </Heading>\r\n          </EmailAuthor>\r\n        ),\r\n        email,\r\n        status,\r\n        content: (\r\n          <EmailHeader>\r\n            <Heading as=\"h5\">\r\n              <Link to={`/admin/email/single/${id}`}>{subject}</Link>\r\n              <span className={`mail-badge ${key <= 1 ? 'primary' : ''}`}>{type}</span>\r\n            </Heading>\r\n            <p>{textRefactor(body, 10)}</p>\r\n            {attach.length\r\n              ? attach.map(item => (\r\n                  <a key={item} className=\"btn-attachment\" download href={require(`../../../static/img/email/${item}`)}>\r\n                    <FeatherIcon icon=\"paperclip\" size={14} />\r\n                    {item}\r\n                  </a>\r\n                ))\r\n              : null}\r\n          </EmailHeader>\r\n        ),\r\n        time: <span className=\"email-time\">{same ? moment(id).format('hh:mm A') : moment(id).format('LL')}</span>,\r\n      });\r\n    });\r\n\r\n  const handleChange = (pagination, filters, sorter) => {\r\n    setState({\r\n      ...state,\r\n      sortedInfo: sorter,\r\n    });\r\n  };\r\n\r\n  const onRowSelection = filterObj => {\r\n    const { filter, byValue } = filterObj;\r\n\r\n    const newSelectedRowKeys = emails\r\n      .filter(value => {\r\n        return value[filter] === byValue;\r\n      })\r\n      .map(item => item.id);\r\n\r\n    setState({ ...state, selectedRowKeys: newSelectedRowKeys });\r\n  };\r\n\r\n  const onSelectChange = selectedRowKey => {\r\n    setState({ ...state, selectedRowKeys: selectedRowKey });\r\n  };\r\n\r\n  const rowSelection = {\r\n    selectedRowKeys,\r\n    onChange: onSelectChange,\r\n    hideDefaultSelections: true,\r\n    selections: [\r\n      {\r\n        key: 'all',\r\n        text: 'All',\r\n        onSelect: () => {\r\n          const newSelectedRowKeys = email.map(item => item.id);\r\n          setState({ ...state, selectedRowKeys: newSelectedRowKeys });\r\n        },\r\n      },\r\n      {\r\n        key: 'read',\r\n        text: 'Read',\r\n        onSelect: onRowSelection.bind(null, { filter: 'status', byValue: 'read' }),\r\n      },\r\n      {\r\n        key: 'unread',\r\n        text: 'Unread',\r\n        onSelect: onRowSelection.bind(null, { filter: 'status', byValue: 'unread' }),\r\n      },\r\n      {\r\n        key: 'stared',\r\n        text: 'Stared',\r\n        onSelect: onRowSelection.bind(null, { filter: 'stared', byValue: true }),\r\n      },\r\n      {\r\n        key: 'unstared',\r\n        text: 'Unstared',\r\n        onSelect: onRowSelection.bind(null, { filter: 'status', byValue: false }),\r\n      },\r\n    ],\r\n  };\r\n\r\n  const columns = [\r\n    {\r\n      title: <Topbar refreshState={refreshState} />,\r\n      dataIndex: 'name',\r\n    },\r\n    {\r\n      title: (\r\n        <div className=\"email-top-search\">\r\n          <AutoComplete placeholder=\"Search mail\" onSearch={handleSearch} dataSource={notData} width=\"80%\" patterns />\r\n        </div>\r\n      ),\r\n      dataIndex: 'content',\r\n    },\r\n    {\r\n      title: (\r\n        <>\r\n          <div className=\"email-top-right d-flex align-items-center\">\r\n            <span className=\"page-number\">1 - 50 of 235</span>\r\n            <div className=\"pagination-slider\">\r\n              <Link className=\"btn-paging\" to=\"#\">\r\n                <FeatherIcon icon={!rtl ? 'chevron-left' : 'chevron-right'} size={14} />\r\n              </Link>\r\n              <Link className=\"btn-paging\" to=\"#\">\r\n                <FeatherIcon icon={rtl ? 'chevron-left' : 'chevron-right'} size={14} />\r\n              </Link>\r\n            </div>\r\n            <div className=\"email-extra\">\r\n              <Link\r\n                onClick={() => {\r\n                  setState({\r\n                    ...state,\r\n                    sort: !sort,\r\n                  });\r\n                  if (sort) {\r\n                    dispatch(onSortingAscending());\r\n                  } else {\r\n                    dispatch(onSortingDescending());\r\n                  }\r\n                }}\r\n                to=\"#\"\r\n              >\r\n                <FeatherIcon icon=\"sliders\" size={16} />\r\n              </Link>\r\n              <Dropdown\r\n                content={\r\n                  <>\r\n                    <Link to=\"#\">\r\n                      <span>Newest</span>\r\n                    </Link>\r\n                    <Link to=\"#\">\r\n                      <span>Oldest</span>\r\n                    </Link>\r\n                    <Link to=\"#\">\r\n                      <span>Unread</span>\r\n                    </Link>\r\n                  </>\r\n                }\r\n              >\r\n                <Link to=\"#\">\r\n                  <FeatherIcon icon=\"more-vertical\" size={18} />\r\n                </Link>\r\n              </Dropdown>\r\n            </div>\r\n          </div>\r\n        </>\r\n      ),\r\n      dataIndex: 'time',\r\n      key: 'time',\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <Style\r\n      className=\"table-responsive\"\r\n      pagination={false}\r\n      rowSelection={rowSelection}\r\n      columns={columns}\r\n      dataSource={data}\r\n      onChange={handleChange}\r\n    />\r\n  );\r\n};\r\n\r\nContent.propTypes = {\r\n  searchData: propTypes.arrayOf(propTypes.object).isRequired,\r\n  email: propTypes.arrayOf(propTypes.object).isRequired,\r\n};\r\n\r\nexport default Content;\r\n"]},"metadata":{},"sourceType":"module"}